# ubuntu-base

Базовый образ с [Gosu](https://github.com/tianon/gosu) и сценарием `entrypoint.sh` в комплекте.
Предназначен для реализации на нём образов в которых приложения будут выполнятся с идентификаторами пользователя запустившего контейнер.

## Entrypoint

Базовый образ содержит скрип `entrypoint.sh` который используется как точка входа в дочерних образах. Его целью является запуск приложения внутри контейнера от имени пользователя запустившего контейнер. Это позволяет решить проблему с владельцем и правами доступа к файлам, если контейнер взаимодействует с хостом и программа создаёт или модифицирует файлы.

При запуске `entrypoint.sh` считывает переменные окружения, что бы настроить необходимую среду выполнения.
`entrypoint.sh` позволяет задать:

- **Привилегии суперпользователя**. Установите переменную `${ENTRYPOINT_AS_ROOT}` равной `yes`.
- **Конкретный пользователь**. Запустить от определённого пользователя через имя `${GIVEN_USER}` и id: `${GIVEN_USER_ID}`.
  - **Пользовательские группы**. Ассоциировать данного пользователя с группой по определённому именем: `${GIVEN_GROUP}` и id: `${GIVEN_GROUP_ID}`.
  - **Системные группы**. Ассоциировать пользователя с системными группами, такими как `audio` и `video`. `${ENTRYPOINT_GROUPS}` принимает список имён системных групп через запятую.
- **Рабочая директория**. Установить рабочую директорию в определённую папку, как указано в: `${ENTRYPOINT_WORKDIR}`

## Сборка

Build:

``` bash
docker build --pull --rm -f "./Dockerfile" -t dzmuh/ubuntu-base:latest "$(pwd)"
```

## Полезные ссылки

